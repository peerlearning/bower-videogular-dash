"use strict";angular.module("com.2fdevs.videogular.plugins.dash",[]).directive("vgDash",["$window",function(e){return{restrict:"A",require:"^videogular",link:function(a,t,i,n){var r,s=/^application\/dash\+xml/i;"MediaSource"in e&&(a.isDASH=function(e){var a=s.test(e.type),t=e.src.indexOf&&e.src.indexOf(".mpd")>0;return a||t},a.onSourceChange=function(e){var t=e.src;a.isDASH(e)?(angular.isFunction(dashjs&&dashjs.MediaPlayer)?(r=dashjs.MediaPlayer().create()).initialize(n.mediaElement[0],t,n.autoPlay):((r=new MediaPlayer(new Dash.di.DashContext)).setAutoPlay(n.autoPlay),r.startup(),r.attachView(n.mediaElement[0]),r.attachSource(t)),r&&r.getDebug().setLogToBrowserConsole(!1)):r&&(r.reset(),r=null,n.mediaElement.attr("src",t),n.stop())},a.$watch(function(){return n.sources},function(e,t){a.onSourceChange(e[0])}))}}}]);